function [M] = full_transform_rot(X,Y,Z,x1,y1,z1,x2,y2,z2,alpha,beta,th1,th2)
M = zeros(4,26);
[a,b,c] = f_angles(X,Y,Z,x1,z1);
a = 0;
[p,q,r] = f_angles(X,Y,Z,x2,z2);
p = 0;
foot1 = [x1;y1;z1;1];
toe1 = foot1 + Rz(alpha)*[3;0;0;1];
knee1 = foot1 + Rz(alpha)*Rx(a)*Ry(b)*[0;0;15;1];
hip1 = foot1 + [0;0;Z-foot1(3);1];
com = [X;Y;Z;1];
foot2 = [x2;y2;z2;1];
toe2 = foot2 + Rz(beta)*[3;0;0;1];
knee2 =  foot2 + Rz(beta)*Rx(p)*Ry(q)*[0;0;15;1];
hip2 = foot2 + [0;0;Z-foot2(3);1];
neck = com + Rz(alpha)*Ry(th1)*[0;0;20;1];%assume neck moves with left leg
head = neck + Rz(alpha)*Ry(th1)*[0;0;5;1];
shld1 = neck + Rz(alpha)*Ry(th1)*[0;-5;0;1];
shld2 = neck + Rz(alpha)*Ry(th1)*[0;5;0;1];
hand1 = shld1 + Rz(alpha)*Ry(th2)*[10;0;0;1];
hand2 = shld2 + Rz(alpha)*Ry(th2)*[10;0;0;1];
ax1 = hip1 + [0;0;1;1];
ax2 = hip2 + [0;0;1;1];
M(:,1) = head;
M(:,2) = neck;
M(:,3) = shld1;
M(:,4) = hand1;
M(:,5) = shld1;
M(:,6) = shld2;
M(:,7) = hand2;
M(:,8) = shld2;
M(:,9) = neck;
M(:,10)= com;
M(:,11)= hip1;
M(:,12)= ax1;
M(:,13)= hip1;
M(:,14)= knee1;
M(:,15)= foot1;
M(:,16)= toe1;
M(:,17)= foot1;
M(:,18)= knee1;
M(:,19)= hip1;
M(:,20)= com;
M(:,21)= hip2;
M(:,22)= ax2;
M(:,23)= hip2;
M(:,24)= knee2;
M(:,25)= foot2;
M(:,26)= toe2;
end